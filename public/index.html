<!DOCTYPE html>
<html>

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<div class="container">
  <head>
    <title>최진아의 구구단 게임</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1>최진아의 구구단 게임</h1></p>
    <h5>10번 연속으로 성공하면 축하 메세지가 있습니다!</h2></p>
      
    
    <button type=button style="WIDTH: 80pt; HEIGHT: 30pt" value="네모난버튼" onclick="generateQuestion()">시작</button>
    <button type=button style="WIDTH: 80pt; HEIGHT: 30pt" value="네모난버튼" onclick="reset()">초기화(다시)</button></p>
  </p>
  <p id="question" style="
    font-style: italic ; 
    font-weight: bold; 
    font-size: 1.5em;
    line-height: 1.0em; 
    color: navy;
    font-family: arial;
    "></p> <!-- 문제를 나타내는 요소 -->
    <input placeholder="답 입력" type="text" style="WIDTH: 200pt; HEIGHT: 20pt" id="answer" onkeyup="enterkey()"> </p>

    <button type=button style="WIDTH: 80pt; HEIGHT: 30pt" value="네모난버튼" onclick="checkAnswer()">확인</button>
    <p id="result"></p>
    
    <p id="result" style="
    font-style: italic ; 
    font-weight: bold; 
    font-size: 1.5em;
    line-height: 1.0em; 
    color: rgb(128, 30, 181);
    font-family: arial;
    "></p>


    <style>
      .container {
        width: 100%;
        height: 100%;
        background: pink;
      }
    </style>

    <script>
      var timeLimit = 8; // 시간 제한 (초)
      var startTime; // 퀴즈 시작 시간
      var timer; // 타이머
      var num1, num2; // 구구단 문제의 숫자
      //var answer; // 사용자의 답
      var correctAnswer; // 정답

      var consecutiveCorrectAnswers = 0;
      var congratulated = false;
      let input= document.getElementById('answer');


      function enterkey() {
	if (window.event.keyCode == 13) {
    checkAnswer()
    	// 엔터키가 눌렸을 때
    }
}

      // 문제 출제 함수
      function generateQuestion() {
        num1 = Math.floor(Math.random() * 9) + 1; // 1 ~ 9 중 랜덤한 숫자 선택
        num2 = Math.floor(Math.random() * 9) + 1;
        correctAnswer = num1 * num2; // 정답 계산
        document.getElementById("question").innerHTML = num1 + " × " + num2 + " = ?";
        document.getElementById("answer").value = "";
        document.getElementById("result").innerHTML = "";
        startTime = new Date(); // 퀴즈 시작 시간 기록
        timer = setTimeout(timeOut, timeLimit * 1000); // 타이머 시작
      }

      // 정답 확인 함수
      
   function checkAnswer() {
     answer = document.getElementById("answer").value;
  if (answer == correctAnswer) {
     document.getElementById("result").innerHTML = "딩동댕~ 최진아 짱! &#x1F601";
     consecutiveCorrectAnswers ++;
      if (consecutiveCorrectAnswers == 5) {
        document.getElementById("result").innerHTML = "5번연속 성공했구나 장하다 우리 진아!!! &#x1F601&#x1F601";
      }
      if (consecutiveCorrectAnswers == 10) {
        document.getElementById("result").innerHTML = "10번 성공 축하해!!진아~~졸업!!! &#x1F63D &#x1F63D";
        alert("10번 성공 축하해!!이 화면을 아빠에게 보여줘~!");
      }
  clearTimeout(timer); // 타이머 중지
  clearInterval(timer); // 타이머 중지
   setTimeout(generateQuestion, 2000); // 2초 후 다음 문제 출제
     } else {
     document.getElementById("result").innerHTML = "땡~ 틀렸어요.&#x1F62D";
     consecutiveCorrectAnswers =0
     }
  }
    

  function reset() {
        clearTimeout(timer);
        //clearInterval(timer);
        document.getElementById("question").innerHTML = "";
        document.getElementById("answer").value = "";
        document.getElementById("result").innerHTML = "";
}



// 시간 초과 함수
function timeOut() {
  document.getElementById("result").innerHTML = "땡~ 시간 초과!&#x1F635";
        setTimeout(generateQuestion, 2000); //2초 후 다음 문제 출제
        consecutiveCorrectAnswers =0
      }

      // 초기화 함수
      function reset() {
        clearTimeout(timer);
        document.getElementById("question").innerHTML = "";
        document.getElementById("answer").value = "";
        document.getElementById("result").innerHTML = "";
        consecutiveCorrectAnswers =0
      }
      
      // 시작 버튼 클릭 시 게임 시작
      document.getElementById("start").onclick = function() {
        reset();
        generateQuestion();
      };

      

      //이 enter키 기능이 작동을 안함
      input.addEventListener("keydown", function (event) {
        // detect event key
        if (event.keyCode == 13) {
          alert("Button code executed.");
        }
      });



      // 연속 정답 개수와 축하 메시지 출력 여부를 저장하는 변수
      //var consecutiveCorrectAnswers = 0;
      //var congratulated = false;
      //
      //function checkAnswer() {
      //  answer = document.getElementById("answer").value;
      //  if (answer == correctAnswer) {
      //    consecutiveCorrectAnswers++; // 연속 정답 개수 증가
      //    if (consecutiveCorrectAnswers == 2 && !congratulated) { // 10번 연속 정답이고 아직 축하 메시지를 출력하지 않았을 때
      //      document.getElementById("result").innerHTML = "최진아 대단해! 10번 연속 정답을 맞췄구나!! 축하해!&#x1F601 &#x1F601 &#x1F601";
      //      reset();
      //      congratulated = true; // 축하 메시지 출력 여부를 true로 변경
      //    } else {
      //      document.getElementById("result").innerHTML = "진아 잘했어!&#x1F601";
      //      clearTimeout(timer);
      //      setTimeout(generateQuestion, 1000);
      //    }
      //  } else {
      //    consecutiveCorrectAnswers = 0; // 연속 정답 개수 초기화
      //    document.getElementById("result").innerHTML = "틀렸다.&#x1F62D";
      //  }
      //}


      </script>
  </body>
  
</div>
</html>
